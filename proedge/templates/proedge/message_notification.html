<!-- templates/components/message_notification.html -->
<div class="my-6">
    <button id="toggleMessages" class="bg-red-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-red-700 transition">
        Messages ({{ interests|length }})
    </button>

    {% if interests %}
  <ul>
    {% for interest in interests %}
      <li style="margin-bottom: 1em;">
        <strong>{{ interest.user.get_full_name|default:interest.user.username }}</strong>
        is interested in 
        <a href="{% url 'property_detail' interest.property.pk %}">{{ interest.property.title }}</a><br>
        <strong>Type:</strong> {{ interest.interest_type }}<br>
        <strong>Offer:</strong> R{{ interest.offer_price|floatformat:2 }}<br>
        <strong>Message:</strong> {{ interest.message }}<br>
        <strong>Contact:</strong> {{ interest.user.userprofile.contact_number|default:"N/A" }}<br>
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>No offers or interest submitted yet.</p>
{% endif %}
</div>

<script>
    const toggleBtn = document.getElementById('toggleMessages');
    const messagePanel = document.getElementById('messagePanel');

    if (toggleBtn) {
        toggleBtn.addEventListener('click', () => {
            messagePanel.classList.toggle('hidden');
        });
    }
</script>
