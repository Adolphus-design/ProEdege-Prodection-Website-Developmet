{% extends "base.html" %}
{% block content %}

<h1 class="text-xl font-bold mb-4">Auctioneer Dashboard</h1>
<hr>
<h2>My Auctions</h2>
<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Start</th>
      <th>End</th>
      <th>Min Bid</th>
      <th>Increment</th>
      <th>Status</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for auction in auctions %}
      <tr>
        <td>{{ auction.property.title }}</td>
        <td>{{ auction.start_time }}</td>
        <td>{{ auction.end_time }}</td>
        <td>R{{ auction.minimum_bid }}</td>
        <td>R{{ auction.bid_increment }}</td>
        <td>{{ auction.status }}</td>
        <td><a href="{% url 'edit_auction' auction.id %}">Edit Auction</a></td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<hr>

<h3>Bids on My Auctions</h3>
{% for auction in auctions %}
  <h4>{{ auction.property.title }}</h4>
  {% with auction.bids.all as auction_bids %}
    {% if auction_bids %}
      <ul>
        {% for bid in auction_bids %}
          <li>{{ bid.user.username }} - R{{ bid.amount }} at {{ bid.timestamp }}</li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No bids yet for this auction.</p>
    {% endif %}
  {% endwith %}
{% endfor %}



{% endblock %}
